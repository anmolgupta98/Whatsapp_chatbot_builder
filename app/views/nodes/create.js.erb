// console.log('agni skalana');
"/assets/ckeditor/config.js";

<% botmessages_box_after_partial = "botmessages_box_after_partial_" + (@parent_id).to_s %>
<% botresponses_box_before = "botresponses_box_before_" + (@parent_id).to_s %>
<% botresponses_box_after = "botresponses_box_after_" + (@node.id).to_s %>
<% add_a_node = "add_a_node_" + (@node.id).to_s%>
<% transfer_to_agent = "transfer_to_agent_" + (@node.id).to_s%>
<% link_to_node = "link_to_node_" + (@node.id).to_s%>
<% link_to_node_label = "link_to_node_label_" + (@node.id).to_s%>
<% infoicon_for_link_to_node = "infoicon_for_link_to_node_" + (@node.id).to_s %>
<% exit_bot = "exit_bot_" + (@node.id).to_s%>
<% transfer_to_agent_message = "transfer_to_agent_message_" + (@node.id).to_s%>
<% link_to_node_message = "link_to_node_message_" + (@node.id).to_s%>
<% exit_message = "exit_message_" + (@node.id).to_s%>
<% previous_message_and_options_card_divider = "previous_message_and_options_card_divider_" +  (@node.id).to_s %>
<% text_area_form_hide_or_show = "text_area_form_hide_or_show_" +  (@node.id).to_s %>
<% submit_button_for_attaching_image = "submit_button_for_attaching_image_" + (@node.id).to_s %>
<% attach_message_image = "attach_message_image_" + (@node.id).to_s%>
<% attach_message_video = "attach_message_video_" +  (@node.id).to_s %>
<% submit_button_for_attaching_video = "submit_button_for_attaching_video_" +  (@node.id).to_s%>
<% attach_message_pdf = "attach_message_pdf_" +  (@node.id).to_s %>
<% submit_button_for_attaching_pdf = "submit_button_for_attaching_pdf_" +  (@node.id).to_s%>
<% botresponses_messages_area_text_area = "botresponses_messages_area_text_area_" + (@node.id).to_s %>


document.getElementById('<%= botmessages_box_after_partial%>').innerHTML = "<%= j render 'home/edit/nodes/botmessages_box_after' , parent_id: @parent_id%>";
document.getElementById('<%= botresponses_box_before %>').classList.add('hide');
document.getElementById('<%= botresponses_box_after%>').classList.remove('hide');

document.getElementById('<%= attach_message_image%>').onchange = function(){
	console.log('uploaded');
	document.getElementById('<%= submit_button_for_attaching_image%>').click();
}

document.getElementById('<%= attach_message_video%>').onchange = function(){
	console.log('uploaded video');
	document.getElementById('<%= submit_button_for_attaching_video%>').click();
}

document.getElementById('<%= attach_message_pdf%>').onchange = function(){
	console.log('uploaded pdf');
	document.getElementById('<%= submit_button_for_attaching_pdf%>').click();
}

<%if @node.messages.first == nil%>
	document.getElementById('<%= previous_message_and_options_card_divider%>').classList.add('hide');
	document.getElementById('<%= text_area_form_hide_or_show %>').classList.remove('hide');
<%else%>
	document.getElementById('<%= previous_message_and_options_card_divider%>').classList.remove('hide');
	document.getElementById('<%= text_area_form_hide_or_show %>').classList.add('hide');
<%end%>

<%if @node.parent_id == 0 %>
	if (document.getElementById("<%= link_to_node %>")){
		document.getElementById("<%= link_to_node %>").disabled= "disabled";
		document.getElementById("<%= link_to_node_label %>").style.color = "grey";
		document.getElementById("<%= infoicon_for_link_to_node %>").classList.remove('hide');	
	}
<%end%>

document.getElementById('<%= exit_bot %>').onclick = function() {
	document.getElementById('<%= exit_message %>').classList.remove('hide');
	document.getElementById('<%= transfer_to_agent_message %>').classList.add('hide');
	document.getElementById('<%= link_to_node_message %>').classList.add('hide');
}
document.getElementById('<%= add_a_node %>').onclick = function() {
	document.getElementById('<%= exit_message %>').classList.add('hide');
	document.getElementById('<%= transfer_to_agent_message %>').classList.add('hide');
	document.getElementById('<%= link_to_node_message %>').classList.add('hide');
}
document.getElementById('<%= transfer_to_agent %>').onclick = function() {
	document.getElementById('<%= exit_message %>').classList.add('hide');
	document.getElementById('<%= transfer_to_agent_message %>').classList.remove('hide');
	document.getElementById('<%= link_to_node_message %>').classList.add('hide');
}
document.getElementById('<%= link_to_node %>').onclick = function() {
	document.getElementById('<%= exit_message %>').classList.add('hide');
	document.getElementById('<%= transfer_to_agent_message %>').classList.add('hide');
	document.getElementById('<%= link_to_node_message %>').classList.remove('hide');
}
CKEDITOR.replace( ('<%= botresponses_messages_area_text_area %>'), {
    customConfig: "/assets/ckeditor/config.js"
});